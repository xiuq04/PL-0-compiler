# 实验报告
## 遇到的问题
### 问题描述:
####    进行数组的语法分析时想要报尽可能多的错误而引发其他问题，比如想要判断左括号（[）的缺失时，如：读到“var a”后发现其紧接着是一个数字或者字符，由于考虑不周，就想当然的将这个数字或者字符作为数组的下标，这当然是错误的，因为“var a b;”应该是缺失逗号，而不是缺失左括号，又如“var a b];"应该报缺失逗号和遇到不被期望的错误token']'而不是报缺失‘['的错误。

### 问题解决:
####    在队友进行错误分析的补充时进行了讨论，并由队友进行了纠正与优化。

### 思考与启发:
####    在不知方向的时候不妨去借鉴同类型的已成功的例子，如这次实验遇到的不知道该报什么错误的时候可以在其他语言进行尝试学习，有了参照会少走弯路。

## 组内任务与实验过程
### 组内任务
####    本次实验我选择了实现数组和负数的语法分析与相应的栈处理，相应的添加了一些相关的错误处理。但是由于考虑不周等其他原因，和负责错误处理部分的队友想法有出入。因为我的想法没有他的全面，所以最后其进行了大部分的修改，相当于我没有实现数组的错误处理。

### 实验过程
####    构思好语法树与产生式后，开始考虑应该对哪些部分进行修改。想到对于负数，只需要修改const类型的声明即可，产生式相应的修改为"V -> ident = NUMBER E","E -> COMMA V | ε"和"NUMBER -> MINUS number |number"；对于数组，需要在var类型的声明中添加对数组的分析,相应的产生式为："V -> ident T E","T -> [ INDEX ] T | ε"和"INDEX -> ident | number | I Z"(此处的I Z即表达式D所推出内容，在Var中不会用到，后面均可能需要)，还要在语句中做出分析修改："P -> ident T := D",对项做出修改："H -> ident T"。这样就把所有需要修改的部分列出，也就知道需要从哪里入手，相应的还有语法图的修改：与产生式略有不同的是语法图中只将数组拓展到二维，所以在程序中也至多分析二维数组。   

## 附加
#### 语法图：
* ![](PB16111328.pdf)