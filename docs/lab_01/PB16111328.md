# 实验一实验报告

## 问题一：方向问题
1. 问题描述：一开始的感觉就是逐个逐个字符读，碰到空格等分隔符就停止，这样把得到的一串字符再进行处理（进行字符串匹配，判断是什么类型），
这样很轻松就完成了，结果在测试的时候发现无法识别出"i;"中的"i"和";"，当然类似的都不能识别出。当时并没有多想，只是想到了字符串结尾可能是标
点符号，于是在处理字符串的时候增添了上述情况的判断。后来在和组内的其他成员讨论时才知道我考虑的并不周全（例如"i+j"未考虑），然而他们的想
法是模拟一个状态机，每当读入一个字符便进行状态之间的转换，而不是对一整个字符串进行操作。
2. 问题解决：当然是重新码一遍，保留之前的读入有效字符函数和匹配函数以及Number数值计算部分。
3. 思考与启发：考虑问题真的要全，码代码前应该有一个整体框架和思路，不应该是走一步看一步。

## 问题二：常识问题
1. 问题描述：以为'\n'前一定是和'\r'配对使用的，所以在进行字符的判断时忽视了'\r'，当读到了'\n'以为前一个字符一定就是'\r'于是在数组的倒数第二个地
方（也就是以为的存了'\r'的位置）置为'\0'表示结束。这样在测试文件test.pl时发现保留字”begin“会少显示一个n，而且会被识别为identifier。这是因为
文件中的”begin“后跟着'\n'和制表符'\t'。
2. 问题解决：观察发现并不是每一行的末尾都会出现问题，所以尝试输出数组的内容，发现确实是漏了“begin”中的“n”，也发现其下一行的输出前端会
出现很长一段空白，这就意味着一开始读入了无效的字符串，但这不会是空格，所以就想到了'\t'，所以在一些必要的地方将该情况考虑进去。补完漏洞后得
到了想要的结果。
3. 思考和启发：首先还是要将问题考虑全面，不可嫌麻烦因小失大；其次是仔细观察异常的地方，发现是哪一方面的问题后才能找到问题所在。错误往往出在
逻辑上。

## 以上问题助教也在后面发了邮件告知，自己也将代码做出了相应的调整。

## 问题三：提前结束
1. 问题描述：当一个token紧跟着注释（注释结尾在文件末尾）时，不能输出这个token，同样的还有一些其他情况将不能输出文件末尾的token。
2. 问题解决：直接想到的是文件指针在指向文件尾时未判断当前是否已经读入有效字符，没有判断是否已经读入了一个token而需要进行返回，我的错误做法是
当读到文件尾时直接结束读取token操作，这样很可能会丢失文件的最后一个token。知道了问题所在后，在对应的位置加入判断，当当前未读入有效字符时直
接结束；若已有字符读入，即用来暂存token的数组不为空时且文件指针指向了文件尾，这时进行正常操作（即跟读到了分隔符操作一致）；若是因为未能判断
当前token类型而向前读取了一个字符而遇到文件结束符也要仔细考虑。
3. 思考与启发：读到文件结束符并不代表当前任务的结束。问题的“边界情况”一定要弄清楚，何时开始，何时结束，需再三考虑周全。
